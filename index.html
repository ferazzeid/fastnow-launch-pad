
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <title>FastNow</title>
    <meta name="description" content="FastNow - Transform your body with our proven protocol" />
    <meta name="theme-color" content="#6366F1" />
    <meta name="msapplication-TileColor" content="#6366F1" />

    <!-- Basic Open Graph - will be overridden by React Helmet -->
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="FastNow" />
    
    <!-- SEO & Performance -->
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&display=swap" as="style">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
    <!-- Favicon will be dynamically loaded by script below -->
    
    <!-- Structured data will be dynamically generated by React -->
    
    <script>
      // Load custom favicon from database settings
      async function loadFavicon() {
        try {
          // Try to load from database first
          const response = await fetch('https://texnkijwcygodtywgedm.supabase.co/rest/v1/site_settings?setting_key=eq.site_favicon&select=setting_value', {
            headers: {
              'apikey': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRleG5raWp3Y3lnb2R0eXdnZWRtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMxODQ3MDAsImV4cCI6MjA2ODc2MDcwMH0.xiOD9aVsKZCadtKiwPGnFQONjLQlaqk-ASUdLDZHNqI',
              'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRleG5raWp3Y3lnb2R0eXdnZWRtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMxODQ3MDAsImV4cCI6MjA2ODc2MDcwMH0.xiOD9aVsKZCadtKiwPGnFQONjLQlaqk-ASUdLDZHNqI'
            }
          });
          
          const data = await response.json();
          let faviconUrl = '';
          
          if (data && data.length > 0 && data[0].setting_value) {
            faviconUrl = data[0].setting_value;
          }
          
          // Fallback to localStorage if no database setting
          if (!faviconUrl) {
            faviconUrl = localStorage.getItem('fastingApp_faviconUrl') || '';
          }
          
          // Default fallback
          if (!faviconUrl) {
            faviconUrl = 'https://texnkijwcygodtywgedm.supabase.co/storage/v1/object/public/website-images/favicon.png';
          }
          
          // Remove any existing favicon links
          const existingLinks = document.querySelectorAll('link[rel="icon"], link[rel="shortcut icon"]');
          existingLinks.forEach(link => link.remove());
          
          // Add the custom favicon
          const linkElement = document.createElement('link');
          linkElement.rel = 'icon';
          linkElement.href = faviconUrl;
          linkElement.type = 'image/png';
          document.head.appendChild(linkElement);
          
        } catch (error) {
          console.log('Error loading favicon, using default:', error);
          // Fallback to default
          const linkElement = document.createElement('link');
          linkElement.rel = 'icon';
          linkElement.href = 'https://texnkijwcygodtywgedm.supabase.co/storage/v1/object/public/website-images/favicon.png';
          linkElement.type = 'image/png';
          document.head.appendChild(linkElement);
        }
      }
      
      // Load favicon when page loads
      loadFavicon();
    </script>
  </head>

  <body>
    <div id="root"></div>
    <!-- IMPORTANT: DO NOT REMOVE THIS SCRIPT TAG OR THIS VERY COMMENT! -->
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
